<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> AngularJS 的数据绑定 · Andre Huang</title><meta name="description" content="AngularJS 的数据绑定 - Andre Huang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/huangza" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about-me/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">AngularJS 的数据绑定</h1><div class="post-time">2016年3月30日</div><div class="post-content"><p>使用 AngularJS，最重要的特点之一，就是它的数据绑定了。</p>
<h1 id="共性"><a href="#共性" class="headerlink" title="共性"></a>共性</h1><p>在 AJS 中，经常需要将给定的变量或者表达式，来添加在某个 html 元素内，这个时候经常用到的就是 ng-bind 和双括号（hexo不允许使用半角的花括号，因此只能用中文或者是全角符号了）了，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div ng-init=&quot;str=&apos;hello&apos;&quot;&gt;</span><br><span class="line">	&lt;p ng-bind=&quot;str&quot;&gt;&lt;/p&gt;</span><br><span class="line">	&lt;p&gt;｛｛str｝｝&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>在这个例子中，两个 p 元素都能在浏览器上显示 str 的内容。这也就是数据绑定的实现。</p>
<h1 id="个性"><a href="#个性" class="headerlink" title="个性"></a>个性</h1><p>尽管 ng-bind 和双括号的作用是一致的，但是两者仍然有一些区别。在两者之中，也更推荐使用 ng-bind。</p>
<h2 id="可见性"><a href="#可见性" class="headerlink" title="可见性"></a>可见性</h2><p>所谓的“可见性”，就是指，在打开页面时，页面内会展现出 AJS 的变量或者表达式。<br>这是因为<strong>此时 HTML 内容已经加载完成，但 Angular 脚本尚未加载完成，因此还没有替换掉 HTML 中的双括号注释</strong>。<br>事实上这个也是我在刚开始学习开发 Angular App 时遇到的问题。<br>这个问题可以通过使用 ng-bind 来解决，这也是利用了 ng-bind 和双括号在可见性的区别。<br>使用双括号时，HTML 加载时，会将这个注释视为字符串，直接打印出来；而使用 ng-bind 的时候，因为 ng-bind 是作为 HTML 元素的属性，因此对于用户是不可见的，因此不会将变量或者表达式暴露出来。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 使用 ng-bind</span><br><span class="line">&lt;div ng-bind=&quot;str&quot;&gt;&lt;/div&gt;</span><br><span class="line">// 而不用 ｛｛｝｝</span><br><span class="line">&lt;div&gt;｛｛str｝｝&lt;/div&gt;</span><br></pre></td></tr></table></figure></p>
<p>p.s. 对于这个现象，还有另外一个解决方案，就是使用 ng-cloak，配合 css 的属性选择器，在 Angular 脚本加载完成前，将带有 ng-cloak 指令的节点隐藏掉，即：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ng:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak &#123;</span><br><span class="line">	display: none !important;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>但是这个方法美中不足的在于，angular 加载完成之前，添加了这个指令的元素会处于空白状态，特别的，加在 body 时，会出现白屏状态。</p>
<h2 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h2><p>并不是只因为使用双括号会暴露表达式就推荐使用 ng-bind 的。更重要的是两者在性能方面上的差异。<br>事实上，使用双括号，速度相对较慢。（这里是指数据较多的情况，下同）<br>造成性能差异的原因是：<br>    首先对于双括号来说，angular 会在每次 $digest 循环时对花括号内的变量进行检查，并且将变量的值重新输出到 HTML 中；<br>    而对于 ng-bind 这个指令来说，它会被放置一个 watcher 监听器，只有当监听器监听到它绑定的变量的值发生变化时，ng-bind 才会应用，更新绑定变量的值</p>
<p>引用 stackoverflow 里一位叫 Konstantin Krass 的朋友的尝试：</p>
<blockquote>
<p>I am currently building a big single page app (~500 bindings per view). Changing from ｛｛｝｝ to strict ng-bind did save us about 20% in every scope.$digest.</p>
</blockquote>
</div></article></div></section><footer><div class="paginator"><a href="/2016/03/31/create-a-blank-html-page/" class="prev">上一篇</a><a href="/2016/03/27/去掉浏览器在input下自带的×/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2016 <a href="http://yoursite.com">Andre Huang</a>, unless otherwise noted.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?a36e15d9e2adec9a21fcdd9f686b1ed2";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>